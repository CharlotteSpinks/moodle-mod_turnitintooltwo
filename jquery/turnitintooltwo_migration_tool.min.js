function migrate(t,i){$.ajax({dataType:"json",type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",data:{action:"begin_migration",courseid:t,turnitintoolid:i,sesskey:M.cfg.sesskey},success:function(t){$.colorbox&&$.colorbox.close(),$("#migration_alert").hide(),window.location.href=M.cfg.wwwroot+"/mod/turnitintooltwo/view.php?id="+t.id}})}function lightBoxCloseButton(){$("body").append('<div id="tii_close_bar"><a href="#" onclick="$.colorbox.close(); return false;">'+M.str.turnitintooltwo.closebutton+"</a></div>")}$(document).ready(function(){1==$("#migrate_type").data("migratetype")&&$("#migrate_type").data("turnitintoolid")!=$("#migrate_type").data("lastasked")?($.colorbox({width:500,height:500,inline:!0,opacity:"0.7",href:"#migration_alert",onLoad:function(){lightBoxCloseButton()},onCleanup:function(){$("#tii_close_bar").remove(),$("#migration_alert").hide()}}),$("#migration_alert").show()):2==$("#migrate_type").data("migratetype")&&migrate($("#migrate_type").data("courseid"),$("#migrate_type").data("turnitintoolid"))}),$(".migrate_link").click(function(){migrate($(this).data("courseid"),$(this).data("turnitintoolid"))}),$(".dontmigrate_link").click(function(){$.colorbox.close(),$("#migration_alert").hide()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1cm5pdGludG9vbHR3b19taWdyYXRpb25fdG9vbC5qcyJdLCJuYW1lcyI6WyJtaWdyYXRlIiwiY291cnNlaWQiLCJ0dXJuaXRpbnRvb2xpZCIsIiQiLCJhamF4IiwiZGF0YVR5cGUiLCJ0eXBlIiwidXJsIiwiTSIsImNmZyIsInd3d3Jvb3QiLCJkYXRhIiwiYWN0aW9uIiwic2Vzc2tleSIsInN1Y2Nlc3MiLCJjb2xvcmJveCIsImNsb3NlIiwiaGlkZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImlkIiwibGlnaHRCb3hDbG9zZUJ1dHRvbiIsImFwcGVuZCIsInN0ciIsInR1cm5pdGludG9vbHR3byIsImNsb3NlYnV0dG9uIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpZHRoIiwiaGVpZ2h0IiwiaW5saW5lIiwib3BhY2l0eSIsIm9uTG9hZCIsIm9uQ2xlYW51cCIsInJlbW92ZSIsInNob3ciLCJjbGljayIsInRoaXMiXSwibWFwcGluZ3MiOiJBQTBCQSxRQUFTQSxTQUFRQyxFQUFVQyxHQUN2QkMsRUFBRUMsTUFDRUMsU0FBWSxPQUNaQyxLQUFRLE9BQ1JDLElBQUtDLEVBQUVDLElBQUlDLFFBQVUsZ0NBQ3JCQyxNQUFTQyxPQUFRLGtCQUFtQlgsU0FBVUEsRUFBVUMsZUFBZ0JBLEVBQWdCVyxRQUFTTCxFQUFFQyxJQUFJSSxTQUN2R0MsUUFBUyxTQUFTSCxHQUNWUixFQUFFWSxVQUNGWixFQUFFWSxTQUFTQyxRQUVmYixFQUFFLG9CQUFvQmMsT0FDdEJDLE9BQU9DLFNBQVNDLEtBQU9aLEVBQUVDLElBQUlDLFFBQVUsb0NBQW9DQyxFQUFLVSxNQUs1RixRQUFTQyx1QkFDTG5CLEVBQUUsUUFBUW9CLE9BQU8sbUZBQXFGZixFQUFFZ0IsSUFBSUMsZ0JBQWdCQyxZQUFjLGNBM0M5SXZCLEVBQUV3QixVQUFVQyxNQUFNLFdBRWlDLEdBQTFDekIsRUFBRSxpQkFBaUJRLEtBQUssZ0JBQXlCUixFQUFFLGlCQUFpQlEsS0FBSyxtQkFBcUJSLEVBQUUsaUJBQWlCUSxLQUFLLGNBQ3ZIUixFQUFFWSxVQUFVYyxNQUFPLElBQUtDLE9BQVEsSUFBS0MsUUFBTyxFQUFNQyxRQUFTLE1BQU9aLEtBQUssbUJBQ3ZFYSxPQUFRLFdBQ0pYLHVCQUVKWSxVQUFVLFdBQ04vQixFQUFFLGtCQUFrQmdDLFNBQ3BCaEMsRUFBRSxvQkFBb0JjLFVBRTFCZCxFQUFFLG9CQUFvQmlDLFFBQzJCLEdBQTFDakMsRUFBRSxpQkFBaUJRLEtBQUssZ0JBQy9CWCxRQUFRRyxFQUFFLGlCQUFpQlEsS0FBSyxZQUFhUixFQUFFLGlCQUFpQlEsS0FBSyxxQkFJN0VSLEVBQUUsaUJBQWlCa0MsTUFBTSxXQUNyQnJDLFFBQVFHLEVBQUVtQyxNQUFNM0IsS0FBSyxZQUFhUixFQUFFbUMsTUFBTTNCLEtBQUsscUJBR25EUixFQUFFLHFCQUFxQmtDLE1BQU0sV0FDekJsQyxFQUFFWSxTQUFTQyxRQUNYYixFQUFFLG9CQUFvQmMiLCJmaWxlIjoidHVybml0aW50b29sdHdvX21pZ3JhdGlvbl90b29sLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgLy8gb25seSBkaXNwbGF5IHRoZSBtb2RhbCBkdXJpbmcgYSBtYW51YWwgbWlncmF0aW9uLlxuICAgIGlmICgoJChcIiNtaWdyYXRlX3R5cGVcIikuZGF0YShcIm1pZ3JhdGV0eXBlXCIpID09IDEpICYmICgkKFwiI21pZ3JhdGVfdHlwZVwiKS5kYXRhKFwidHVybml0aW50b29saWRcIikgIT0gJChcIiNtaWdyYXRlX3R5cGVcIikuZGF0YShcImxhc3Rhc2tlZFwiKSkpIHtcbiAgICAgICAgJC5jb2xvcmJveCh7d2lkdGg6IDUwMCwgaGVpZ2h0OiA1MDAsIGlubGluZTp0cnVlLCBvcGFjaXR5OiBcIjAuN1wiLCBocmVmOlwiI21pZ3JhdGlvbl9hbGVydFwiLFxuICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGlnaHRCb3hDbG9zZUJ1dHRvbigpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsZWFudXA6ZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnI21pZ3JhdGlvbl9hbGVydCcpLmhpZGUoKTtcbiAgICAgICAgfX0pO1xuICAgICAgICAkKCcjbWlncmF0aW9uX2FsZXJ0Jykuc2hvdygpO1xuICAgIH0gZWxzZSBpZiAoJChcIiNtaWdyYXRlX3R5cGVcIikuZGF0YShcIm1pZ3JhdGV0eXBlXCIpID09IDIpIHtcbiAgICAgICAgbWlncmF0ZSgkKFwiI21pZ3JhdGVfdHlwZVwiKS5kYXRhKFwiY291cnNlaWRcIiksICQoXCIjbWlncmF0ZV90eXBlXCIpLmRhdGEoXCJ0dXJuaXRpbnRvb2xpZFwiKSk7XG4gICAgfVxufSk7IFxuXG4kKCcubWlncmF0ZV9saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgbWlncmF0ZSgkKHRoaXMpLmRhdGEoXCJjb3Vyc2VpZFwiKSwgJCh0aGlzKS5kYXRhKFwidHVybml0aW50b29saWRcIikpO1xufSk7XG5cbiQoJy5kb250bWlncmF0ZV9saW5rJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQuY29sb3Jib3guY2xvc2UoKTtcbiAgICAkKCcjbWlncmF0aW9uX2FsZXJ0JykuaGlkZSgpO1xufSk7XG5cbmZ1bmN0aW9uIG1pZ3JhdGUoY291cnNlaWQsIHR1cm5pdGludG9vbGlkKSB7XG4gICAgJC5hamF4KHtcbiAgICAgICAgXCJkYXRhVHlwZVwiOiAnanNvbicsXG4gICAgICAgIFwidHlwZVwiOiBcIlBPU1RcIixcbiAgICAgICAgdXJsOiBNLmNmZy53d3dyb290ICsgXCIvbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiLFxuICAgICAgICBcImRhdGFcIjoge2FjdGlvbjogXCJiZWdpbl9taWdyYXRpb25cIiwgY291cnNlaWQ6IGNvdXJzZWlkLCB0dXJuaXRpbnRvb2xpZDogdHVybml0aW50b29saWQsIHNlc3NrZXk6IE0uY2ZnLnNlc3NrZXl9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoJC5jb2xvcmJveCkge1xuICAgICAgICAgICAgICAgICQuY29sb3Jib3guY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJyNtaWdyYXRpb25fYWxlcnQnKS5oaWRlKCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IE0uY2ZnLnd3d3Jvb3QgKyBcIi9tb2QvdHVybml0aW50b29sdHdvL3ZpZXcucGhwP2lkPVwiK2RhdGEuaWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbGlnaHRCb3hDbG9zZUJ1dHRvbigpIHtcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwidGlpX2Nsb3NlX2JhclwiPjxhIGhyZWY9XCIjXCIgb25jbGljaz1cIiQuY29sb3Jib3guY2xvc2UoKTsgcmV0dXJuIGZhbHNlO1wiPicgKyBNLnN0ci50dXJuaXRpbnRvb2x0d28uY2xvc2VidXR0b24gKyAnPC9hPjwvZGl2PicpO1xufVxuIl19
