function migrate(t,i){$.ajax({dataType:"json",type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",data:{action:"begin_migration",courseid:t,turnitintoolid:i,sesskey:M.cfg.sesskey},success:function(t){$.colorbox&&$.colorbox.close(),$("#migration_alert").hide(),window.location.href=M.cfg.wwwroot+"/mod/turnitintooltwo/view.php?id="+t.id}})}function lightBoxCloseButton(){$("body").append('<div id="tii_close_bar"><a href="#" onclick="$.colorbox.close(); return false;">'+M.str.turnitintooltwo.closebutton+"</a></div>")}$(document).ready(function(){$("#migrate_type").data("turnitintoolid")!=$("#migrate_type").data("lastasked")&&($.colorbox({width:500,height:500,inline:!0,opacity:"0.7",href:"#migration_alert",onLoad:function(){$("#asktomigrate").show(),lightBoxCloseButton()},onCleanup:function(){$("#tii_close_bar").remove(),$("#migration_alert").hide()}}),$("#migration_alert").show()),2==$("#migrate_type").data("migratetype")&&($("#asktomigrate").hide(),$("#migrating").show(),migrate($("#migrate_type").data("courseid"),$("#migrate_type").data("turnitintoolid")))}),$(".migrate_link").click(function(){$("#asktomigrate").hide(),$("#migrating").show(),migrate($(this).data("courseid"),$(this).data("turnitintoolid"))}),$(".dontmigrate_link").click(function(){$.colorbox.close(),$("#migration_alert").hide()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1cm5pdGludG9vbHR3b19taWdyYXRpb25fdG9vbC5qcyJdLCJuYW1lcyI6WyJtaWdyYXRlIiwiY291cnNlaWQiLCJ0dXJuaXRpbnRvb2xpZCIsIiQiLCJhamF4IiwiZGF0YVR5cGUiLCJ0eXBlIiwidXJsIiwiTSIsImNmZyIsInd3d3Jvb3QiLCJkYXRhIiwiYWN0aW9uIiwic2Vzc2tleSIsInN1Y2Nlc3MiLCJjb2xvcmJveCIsImNsb3NlIiwiaGlkZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImlkIiwibGlnaHRCb3hDbG9zZUJ1dHRvbiIsImFwcGVuZCIsInN0ciIsInR1cm5pdGludG9vbHR3byIsImNsb3NlYnV0dG9uIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpZHRoIiwiaGVpZ2h0IiwiaW5saW5lIiwib3BhY2l0eSIsIm9uTG9hZCIsInNob3ciLCJvbkNsZWFudXAiLCJyZW1vdmUiLCJjbGljayIsInRoaXMiXSwibWFwcGluZ3MiOiJBQWtDQSxRQUFTQSxTQUFRQyxFQUFVQyxHQUN2QkMsRUFBRUMsTUFDRUMsU0FBWSxPQUNaQyxLQUFRLE9BQ1JDLElBQUtDLEVBQUVDLElBQUlDLFFBQVUsZ0NBQ3JCQyxNQUFTQyxPQUFRLGtCQUFtQlgsU0FBVUEsRUFBVUMsZUFBZ0JBLEVBQWdCVyxRQUFTTCxFQUFFQyxJQUFJSSxTQUN2R0MsUUFBUyxTQUFTSCxHQUNWUixFQUFFWSxVQUNGWixFQUFFWSxTQUFTQyxRQUVmYixFQUFFLG9CQUFvQmMsT0FDdEJDLE9BQU9DLFNBQVNDLEtBQU9aLEVBQUVDLElBQUlDLFFBQVUsb0NBQW9DQyxFQUFLVSxNQUs1RixRQUFTQyx1QkFDTG5CLEVBQUUsUUFBUW9CLE9BQU8sbUZBQXFGZixFQUFFZ0IsSUFBSUMsZ0JBQWdCQyxZQUFjLGNBbkQ5SXZCLEVBQUV3QixVQUFVQyxNQUFNLFdBRVZ6QixFQUFFLGlCQUFpQlEsS0FBSyxtQkFBcUJSLEVBQUUsaUJBQWlCUSxLQUFLLGVBQ3JFUixFQUFFWSxVQUFVYyxNQUFPLElBQUtDLE9BQVEsSUFBS0MsUUFBTyxFQUFNQyxRQUFTLE1BQU9aLEtBQUssbUJBQ3ZFYSxPQUFRLFdBQ0o5QixFQUFFLGlCQUFpQitCLE9BQ25CWix1QkFFSmEsVUFBVSxXQUNOaEMsRUFBRSxrQkFBa0JpQyxTQUNwQmpDLEVBQUUsb0JBQW9CYyxVQUUxQmQsRUFBRSxvQkFBb0IrQixRQUdvQixHQUExQy9CLEVBQUUsaUJBQWlCUSxLQUFLLGlCQUN4QlIsRUFBRSxpQkFBaUJjLE9BQ25CZCxFQUFFLGNBQWMrQixPQUVoQmxDLFFBQVFHLEVBQUUsaUJBQWlCUSxLQUFLLFlBQWFSLEVBQUUsaUJBQWlCUSxLQUFLLHNCQUk3RVIsRUFBRSxpQkFBaUJrQyxNQUFNLFdBQ3JCbEMsRUFBRSxpQkFBaUJjLE9BQ25CZCxFQUFFLGNBQWMrQixPQUNoQmxDLFFBQVFHLEVBQUVtQyxNQUFNM0IsS0FBSyxZQUFhUixFQUFFbUMsTUFBTTNCLEtBQUsscUJBR25EUixFQUFFLHFCQUFxQmtDLE1BQU0sV0FDekJsQyxFQUFFWSxTQUFTQyxRQUNYYixFQUFFLG9CQUFvQmMiLCJmaWxlIjoidHVybml0aW50b29sdHdvX21pZ3JhdGlvbl90b29sLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgLy8gT25seSBkaXNwbGF5IHRoZSBtb2RhbCBkdXJpbmcgYSBtYW51YWwgbWlncmF0aW9uLlxuICAgIGlmICgkKFwiI21pZ3JhdGVfdHlwZVwiKS5kYXRhKFwidHVybml0aW50b29saWRcIikgIT0gJChcIiNtaWdyYXRlX3R5cGVcIikuZGF0YShcImxhc3Rhc2tlZFwiKSkge1xuICAgICAgICAkLmNvbG9yYm94KHt3aWR0aDogNTAwLCBoZWlnaHQ6IDUwMCwgaW5saW5lOnRydWUsIG9wYWNpdHk6IFwiMC43XCIsIGhyZWY6XCIjbWlncmF0aW9uX2FsZXJ0XCIsXG4gICAgICAgIG9uTG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjYXNrdG9taWdyYXRlJykuc2hvdygpO1xuICAgICAgICAgICAgbGlnaHRCb3hDbG9zZUJ1dHRvbigpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsZWFudXA6ZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnI21pZ3JhdGlvbl9hbGVydCcpLmhpZGUoKTtcbiAgICAgICAgfX0pO1xuICAgICAgICAkKCcjbWlncmF0aW9uX2FsZXJ0Jykuc2hvdygpO1xuICAgIH1cblxuICAgIGlmICgkKFwiI21pZ3JhdGVfdHlwZVwiKS5kYXRhKFwibWlncmF0ZXR5cGVcIikgPT0gMikge1xuICAgICAgICAkKCcjYXNrdG9taWdyYXRlJykuaGlkZSgpO1xuICAgICAgICAkKCcjbWlncmF0aW5nJykuc2hvdygpO1xuXG4gICAgICAgIG1pZ3JhdGUoJChcIiNtaWdyYXRlX3R5cGVcIikuZGF0YShcImNvdXJzZWlkXCIpLCAkKFwiI21pZ3JhdGVfdHlwZVwiKS5kYXRhKFwidHVybml0aW50b29saWRcIikpO1xuICAgIH1cbn0pO1xuXG4kKCcubWlncmF0ZV9saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCgnI2Fza3RvbWlncmF0ZScpLmhpZGUoKTtcbiAgICAkKCcjbWlncmF0aW5nJykuc2hvdygpO1xuICAgIG1pZ3JhdGUoJCh0aGlzKS5kYXRhKFwiY291cnNlaWRcIiksICQodGhpcykuZGF0YShcInR1cm5pdGludG9vbGlkXCIpKTtcbn0pO1xuXG4kKCcuZG9udG1pZ3JhdGVfbGluaycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkLmNvbG9yYm94LmNsb3NlKCk7XG4gICAgJCgnI21pZ3JhdGlvbl9hbGVydCcpLmhpZGUoKTtcbn0pO1xuXG5mdW5jdGlvbiBtaWdyYXRlKGNvdXJzZWlkLCB0dXJuaXRpbnRvb2xpZCkge1xuICAgICQuYWpheCh7XG4gICAgICAgIFwiZGF0YVR5cGVcIjogJ2pzb24nLFxuICAgICAgICBcInR5cGVcIjogXCJQT1NUXCIsXG4gICAgICAgIHVybDogTS5jZmcud3d3cm9vdCArIFwiL21vZC90dXJuaXRpbnRvb2x0d28vYWpheC5waHBcIixcbiAgICAgICAgXCJkYXRhXCI6IHthY3Rpb246IFwiYmVnaW5fbWlncmF0aW9uXCIsIGNvdXJzZWlkOiBjb3Vyc2VpZCwgdHVybml0aW50b29saWQ6IHR1cm5pdGludG9vbGlkLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5fSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKCQuY29sb3Jib3gpIHtcbiAgICAgICAgICAgICAgICAkLmNvbG9yYm94LmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcjbWlncmF0aW9uX2FsZXJ0JykuaGlkZSgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBNLmNmZy53d3dyb290ICsgXCIvbW9kL3R1cm5pdGludG9vbHR3by92aWV3LnBocD9pZD1cIitkYXRhLmlkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKSB7XG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cInRpaV9jbG9zZV9iYXJcIj48YSBocmVmPVwiI1wiIG9uY2xpY2s9XCIkLmNvbG9yYm94LmNsb3NlKCk7IHJldHVybiBmYWxzZTtcIj4nICsgTS5zdHIudHVybml0aW50b29sdHdvLmNsb3NlYnV0dG9uICsgJzwvYT48L2Rpdj4nKTtcbn1cbiJdfQ==
